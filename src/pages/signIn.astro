---
import Layout from '@/layouts/Layout.astro';
import Window from '@/components/Window.astro'

import { Email, Key } from '@/icons';

import { auth } from "@/utils/auth"

const session = await auth.api.getSession({
    headers: Astro.request.headers
})
if (session){
    return Astro.redirect('/dashboard')
}
---

<Layout title="Iniciar Sesión">
    <Window>
        
            <div class="px-0 sm:px-10">
                <div class="bg-white/5 p-2 rounded-xl flex mb-10">
                    <a transition:name="bottonSelect" class="flex-1 cursor-pointer flex items-center justify-center py-3 text-base font-medium rounded-lg bg-white/10 shadow-sm transition-all">
                        Iniciar Sesión
                    </a>
                    <a href="/signUp" class="flex-1 flex items-center justify-center py-3 text-base font-medium rounded-lg text-gray-500 hover:text-white transition-all">
                        Registrarse
                    </a>
                </div>

                <form id="sign-in-form" method="post" action="/api/login" class="space-y-5">

                    <div class="group relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <Email class="text-gray-400 text-2xl" />
                        </div>
                        <input 
                        id="email"
                        name="email"
                        type="email"
                        required
                        autocomplete="email"
                        placeholder="Enter your email*"
                        class="mr-4 bg-[#1E293B] mb-3 sm:mb-0 rounded-xl px-4 w-full text-slate-300 outline-none block pl-12 pr-12 py-4  border border-gray-700/50 text-base placeholder-gray-400 focus:ring-1 focus:ring-gray-700/80 transition-all shadow-sm"
                        />
                    </div>

                    <div class="group relative">
                        <label for="password" class="sr-only">Password</label>
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <Key class="text-gray-400 text-2xl" />
                        </div>
                        <input 
                        id="password"
                        name="password"
                        type="password"
                        required
                        autocomplete="current-password"
                        placeholder="Enter your password*"
                        class="mr-4 bg-[#1E293B]  rounded-xl px-4 w-full text-slate-300 outline-none block pl-12 pr-12 py-4  border border-gray-700/50 text-base placeholder-gray-400 focus:ring-1 focus:ring-gray-700/80 transition-all shadow-sm"
                        />
                    </div>

                    <div class="flex justify-end">
                        <a class="text-sm text-gray-400 hover:text-primary transition-colors" href="/forgotPassword">
                        ¿Contraseña olvidada?
                        </a>
                    </div>

                    <button 
                        type="submit"
                        class="w-full bg-linear-to-r hover:scale-105 from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 shadow-purple-500/25w-full py-4 rounded-xl transition-all shadow-lg shadow-purple-500/25 text-lg"
                    >
                        Continue
                    </button>
                </form>
                <div class="relative mt-8 mb-6">
                    <div aria-hidden="true" class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-gray-200 dark:border-gray-700"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-2 bg-white/5  text-gray-500 ">O continuar con</span>
                    </div>
                </div>
                <div class="flex justify-center gap-6">
                <button aria-label="Sign in with Google" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 transition-colors group">
            </div>
    </Window>
</Layout>
